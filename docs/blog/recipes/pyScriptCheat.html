<table>
<colgroup>
<col style="width: 100%" />
</colgroup>
<thead>
<tr class="header">
<th style="text-align: left;">python3 -V python2 -V</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">#Command-line one-liners # -c run Python
script sent in as cmd string</td>
</tr>
<tr class="even">
<td style="text-align: left;">python -c “print(3.0/2)” python -c “import
math;print(math.sin(1))” python -c “for i in range(1,5):print(i)” python
-c “for r in range(3): print ‘test’”</td>
</tr>
<tr class="odd">
<td style="text-align: left;">python -c “x =1 ; y =4 ; print(x,y) ; x,y
= y,x ; print(x,y)” #Swap Variables python -c “x,y,z =1,4,7;
print(x,y,z) ; x,y,z = z,y,x ; print(x,y,z)” #Swap Variables</td>
</tr>
<tr class="even">
<td style="text-align: left;">python -c “txt=‘She said "Never let go"’ ;
print(txt)” #Backslashes () are used to escape characters in a Python
string.</td>
</tr>
<tr class="odd">
<td style="text-align: left;">python -c “game=‘Popular Nintendo Game
Mario Kart’; print(‘l’ in game)” #determine if a letter or a substring
exists in a string True python -c “game=‘Popular Nintendo Game Mario
Kart’; print(game[0]);print(game[1]);print(game[2])”</td>
</tr>
<tr class="even">
<td style="text-align: left;">python -c “for i in range(1,11):for j in
range(1,11): print(i,j)” #Does not work; two loops in a line are an
invalid syntax. python -c “for i, j in ((i,j) for i in range (1,11) for
j in range(1,11)): print(i, j)”</td>
</tr>
<tr class="odd">
<td style="text-align: left;">#Convert a CSV to JSON python3 -c<br />
“import
csv,json,sys;print(json.dumps(list(csv.reader(open(sys.argv[1])))))”<br />
covid19-vaccinations-town-age-grp.csv</td>
</tr>
</tbody>
</table>
<p>#Setting path at Unix/Linux</p>
<p>$ ls -l /usr/bin/python3 lrwxrwxrwx 1 root root 10 Mar 25 12:41
/usr/bin/python3 -&gt; python3.10</p>
<p>export PATH=“$PATH:/usr/local/bin/python”</p>
<p>PYTHONPATH tells the Python interpreter where to locate the module
files imported into a program PYTHONSTARTUP named as .pythonrc.py
contains commands that load utilities or modify PYTHONPATH. PYTHONCASEOK
used in Windows to instruct Python to find the first case-insensitive
match in an import statement. PYTHONHOME alternative module search path
—————————————————————————————— #Setting path at Windows</p>
<p>#C:is the path of the Python directory path %path%;C:
—————————————————————————————— #Interactive Mode Programming</p>
<p>$ python3 Python 3.10.4 (main, Jun 29 2022, 12:14:53) [GCC 11.2.0] on
linux Type “help”, “copyright”, “credits” or “license” for more
information. &gt;&gt;&gt;</p>
<table>
<colgroup>
<col style="width: 100%" />
</colgroup>
<thead>
<tr class="header">
<th style="text-align: left;">#Script Mode Programming</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">#Multi-Line Statements</td>
</tr>
<tr class="even">
<td style="text-align: left;">total = item_one +<br />
item_two +<br />
item_three</td>
</tr>
<tr class="odd">
<td style="text-align: left;">days = [‘Monday’, ‘Tuesday’, ‘Wednesday’,
‘Thursday’, ‘Friday’]</td>
</tr>
</tbody>
</table>
<h2
id="echo-22.67892-python3--c-printfroundfloatinput-round-floats-in-bash-with-pythons-help">$
echo “22.67892” | python3 -c “print(f’{round(float(input()))}’)” #Round
floats in Bash with Python’s help</h2>
<p>#single (’), double (“) and triple (’’’ or”““) quotes to denote
string literals</p>
<p>word = ‘word’ sentence = “This is a sentence.” paragraph = “““This is
a paragraph. It is made up of multiple lines and sentences.”“”
—————————————————————————————— #Multiple Statements on a Single Line</p>
<h2 id="import-sys-x-foo-sys.stdout.writex">import sys; x = ‘foo’;
sys.stdout.write(x + ‘’)</h2>
<p>#Assigning Values to Variables counter = 100 # An integer assignment
miles = 1000.0 # A floating point name = “John” # A string
—————————————————————————————— #Multiple Assignment a = b = c = 1
—————————————————————————————— #comments</p>
<h1 id="first-comment">First comment</h1>
<p>print “Hello, Python!” # second comment</p>
<table>
<colgroup>
<col style="width: 100%" />
</colgroup>
<thead>
<tr class="header">
<th style="text-align: left;">#Strings str = ‘Hello World!’</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">#Lists,elements and size can be
changed</td>
</tr>
<tr class="even">
<td style="text-align: left;">list = [ ‘abcd’, 786 , 2.23, ‘john’, 70.2
] tinylist = [123, ‘john’]</td>
</tr>
<tr class="odd">
<td style="text-align: left;">print (list) # Prints complete list print
(list[0]) # Prints first element of the list print (list[1:3]) # Prints
elements starting from 2nd till 3rd print (list[2:]) # Prints elements
starting from 3rd element print (tinylist * 2) # Prints list two times
print (list + tinylist) # Prints concatenated lists</td>
</tr>
<tr class="even">
<td style="text-align: left;">print(list) list[2] = “3” #update the list
print(list)</td>
</tr>
</tbody>
</table>
<h1 id="tuples-read-only-listscannot-be-updated">Tuples, read-only
lists,cannot be updated</h1>
<p>tuple = ( ‘abcd’, 786 , 2.23, ‘john’, 70.2 ) tinytuple = (123,
‘john’)</p>
<p>print tuple # Prints the complete tuple print tuple[0] # Prints first
element of the tuple print tuple[1:3] # Prints elements of the tuple
starting from 2nd till 3rd print tuple[2:] # Prints elements of the
tuple starting from 3rd element print tinytuple * 2 # Prints the
contents of the tuple twice print tuple + tinytuple # Prints
concatenated tuples —————————————————————————————— #Dictionary,key-value
pairs.</p>
<p>dict = {} dict[‘one’] = “This is one” dict[2] = “This is two” dict[3]
= 3</p>
<p>tinydict = {‘name’: ‘john’,‘code’:6734, ‘dept’: ‘sales’}</p>
<p>print(dict[‘one’]) print(dict[3])</p>
<p>print(dict.keys()) print(dict.values()) print(dict)
—————————————————————————————— #type conversion</p>
<p>int(“0x12F”, base=16) #passing a hexadecimal string and expecting a
decimal integer.</p>
<p>str(5) # convert a Python int to a string using str() type(str(6))
—————————————————————————————— #concatenate string and integer</p>
<p>s = ‘Year is’ y = 2018;</p>
<p>print(“%s%s” % (s, y)) print(“{}{}”.format(s, y))
print(f’{s}{y}’)</p>
<p>#join a and b using a null string separator (sep), since the default
separator for print() is a space (” “). a =”Hello, I am in grade ” b =
12 print(a, b, sep=““)</p>
<p>#String containing arithmetic expression &gt;&gt;&gt; x=eval(‘3+4’)
&gt;&gt;&gt; type(x) &lt;class ‘int’&gt; &gt;&gt;&gt; x 7</p>
<blockquote>
<blockquote>
<blockquote>
<p>x = eval(’list((a*2 for a in range(5)))‘) x [0, 2, 4, 6, 8] type(x)
&lt;class ’list’&gt; —————————————————————————————— # input by the user,
nested if answer = input(“What is your age?”)</p>
</blockquote>
</blockquote>
</blockquote>
<p>if int(answer) &gt;= 18: answer = input(“What country do you live
in?”) if answer == “canada”: print(“Me as well!”) else: print(“Oh, I do
not live there.”)</p>
<p>food = input(“What is your favorite food?”) drink = input(“What is
your favorite drink?”)</p>
<p>if food == “pizza” and drink == “juice”: print(“Those are my favorite
as well!”) else: print(“One of those is not my favorite”)
——————————————————————————————<br />
#List comprehensions</p>
<p>lst1 = [1, 2, 3] lst2 = [3, 4, 5] print([x * y for x in lst1 for y in
lst2]) #[3, 4, 5, 6, 8, 10, 9, 12, 15]</p>
<p>any([i % 3 for i in [3, 3, 4, 4, 3]]) #4 % 3 = 1, and 1 is true, so
any() returns True.</p>
<h2
id="sum1-for-i-in-3-3-4-4-3-if-i-4-how-many-items-a-condition-is-true">sum(1
for i in [3, 3, 4, 4, 3] if i == 4) #how many items a condition is
true</h2>
<p>mytuple = (0, 1, False) # Returns True because the second item is
True x = any(mytuple) print(x)</p>
<p>myset = {0, 1, 0} ## Returns True because the second item is True x =
any(myset) print(x)</p>
<p>mydict = {0 : “Apple”, 1 : “Orange”} # For dictionaries the any()
function checks the keys, not the values. x = any(mydict) # Returns True
because the second key is True. print(x) —————————————————————————————–
#multi-line statements in the one-line command-line</p>
<p>echo -e “import sysr in range(10): print ‘rob’” | python</p>
<p>python -c “exec("import sysr in range(10): print ‘rob’")”</p>
<p>(echo “import sys” ; echo “for r in range(10): print ‘rob’”) |
python</p>
<p>python - &lt;&lt;EOF import random for r in range(3):
print(random.randint(1, 42)) EOF</p>
<h2
id="python--c-import-sys-maplambda-x-sys.stdout.writerobd-x-range10">python
-c “import sys; map(lambda x: sys.stdout.write(‘rob%d’ % x),
range(10))”</h2>
<p>#Python wrapper for ls command, run shell command in Python
#!/usr/bin/env python #A System Information Gathering Script import
subprocess</p>
<p>#Command 1 uname = “uname” uname_arg = “-a” print “Gathering system
information with %s command:” % uname subprocess.call([uname,
uname_arg])</p>
<p>#Command 2 diskspace = “df” diskspace_arg = “-h” print “Gathering
diskspace information %s command:” % diskspace
subprocess.call([diskspace, diskspace_arg])
—————————————————————————————— #Python wrapper for ls command, run shell
command in Python $ cat ls.py #!/usr/bin/env python #Python wrapper for
the ls command</p>
<p>import subprocess</p>
<h2 id="subprocess.callls-l">subprocess.call([“ls”,“-l”])</h2>
<h1 id="list-locked-users">list locked users</h1>
<p>$ cat locked_user.py #! /usr/bin/python3</p>
<p>import os import stat import sys</p>
<p>def get_homes_and_uids_for_users_with_shells(): users = {} with
open(“/etc/passwd”, “rt”) as pf: for line in pf: login, x, uid, gid,
gecos, home, shell = line.split(‘:’) if x != ‘x’: sys.stderr.write(“***
Account ‘{!r}’ not properly shadowed” .format(login)) if shell not in
(‘/bin/false’, ‘/usr/bin/false’, ‘/sbin/nologin’, ‘/usr/sbin/nologin’):
users[login] = (int(uid), home) return users</p>
<p>def check_ssh_auth_perms(path, owner): owners = (0, owner)
badwritebits = stat.S_IWGRP | stat.S_IWOTH # 0022 # FIXME: I’m not sure
whether sshd allows symlinks at any point in this # path. Conservatively
assume it does. # FIXME: Doesn’t check for ACLs. try: st = os.stat(path)
except FileNotFoundError: return False if (st.st_size == 0 or st.st_uid
not in owners or not stat.S_ISREG(st.st_mode) or
stat.S_IMODE(st.st_mode) &amp; badwritebits): return False while True:
path = os.path.dirname(path) # Not necessary to check for ENOENT; if we
got here at all, # the entire chain of parent dirs must exist st =
os.stat(path) if (st.st_uid not in owners or not
stat.S_ISDIR(st.st_mode) or stat.S_IMODE(st.st_mode) &amp;
badwritebits): return False if path == ‘/’: break return True</p>
<p>def get_users_with_ssh_keys(all_users): ssh_users = set()
already_processed_homes = {} for login, (uid, home) in
all_users.items(): if home in already_processed_homes: if
already_processed_homes[home]: ssh_users.add(login) continue if
(check_ssh_auth_perms(home + “/.ssh/authorized_keys”, uid) or
check_ssh_auth_perms(home + “/.ssh/authorized_keys2”, uid)):
already_processed_homes[home] = True ssh_users.add(login) else:
already_processed_homes[home] = False return ssh_users</p>
<p>def get_users_with_possible_passwords(): pw_users = set() with
open(“/etc/shadow”, “rt”) as sf: for line in sf: login, phash, chg,
mina, maxa, warn, inact, expir, res<br />
= line.split(‘:’) if not phash: sys.stderr.write(“*** Account ‘{!r}’ has
blank password” .format(login)) if phash[0] != ’*’ and phash[0] != ‘!’:
pw_users.add(login) return pw_users</p>
<p>def main(): users = get_homes_and_uids_for_users_with_shells()
ssh_users = get_users_with_ssh_keys(users) pw_users =
get_users_with_possible_passwords()</p>
<pre><code>active_users = set(users.keys()) &amp; (ssh_users | pw_users)
for u in sorted(active_users):
    sys.stdout.write(u + &quot;\n&quot;)</code></pre>
<p>main() vagrant@vg-ubuntu-01:~$ —————————————————————————————— $ cat
a.py #!/usr/bin/env python</p>
<p>for a in [1, 2]: for b in [‘a’, ‘b’]: print (a, b) $ python3 a.py
—————————————————————————————— #check whether a certain file path is a
directory #!/usr/bin/env python</p>
<p>import os</p>
<p>if os.path.isdir(“/tmp”): print “/tmp is a directory” else: print
“/tmp is not a directory” ——————————————————————————————
#calculate_size.py #python3 /path/to/calculate_size.py
</path/to/your/textfile/with/a/filelist> #sudo python3
/path/to/calculate_size.py </path/to/your/textfile/with/a/filelist></p>
<p>#!/usr/bin/env python3 import os import subprocess import sys</p>
<p>f_list = sys.argv[1] get = lambda x:
subprocess.check_output([“/bin/bash”, “-c”, x]).decode(“utf-8”)</p>
<p>with open(f_list) as src: files = [f.strip() for f in
src.readlines()]</p>
<p>total_size = [] for f in files: size = get(‘du -hk
“‘+f+’”’).split()[0]; total_size.append(int(size)) print(f.strip(’“’)+”,
size+” k”) print(“-”*30, “of files:”+str(len(total_size)),
“size:”+str(sum(total_size))+” k”) try: print(“average
size:”+str(int(sum(total_size)/len(total_size)))+” k“) except
ZeroDivisionError: pass</p>
<p>proceed = input(“Should I delete the listed files? (press return to
proceed, x + return to cancel):”) if proceed == ““: for file in files:
os.remove(file) —————————————————————————————— #Extract IP address from
file; reoccuring, common, repeating IP address</p>
<p>#log Feb 3 13:34:05 j4-be02 sshd[676]: Failed password for root from
85.17.188.70 port 48495 ssh2 Feb 3 21:45:18 j4-be02 sshd[746]: Failed
password for invalid user test from 62.45.87.113 port 50636 ssh2 Feb 4
08:39:46 j4-be02 sshd[1078]: Failed password for root from 1.234.51.243
port 60740 ssh2 Feb 5 08:39:46 j4-be02 sshd[1078]: Failed password for
root from 1.234.51.243 port 60740 ssh2 Feb 5 08:45:46 j4-be02
sshd[1078]: Failed password for root from 1.234.51.243 port 60740
ssh2</p>
<p>def attackers_count(): #how many attacks occur per hour per day from
itertools import groupby #open the auth.log for reading
myAuthlog=open(‘logs/ip.log5’, ‘r’)</p>
<p># looks for ‘Failed password for’ myAuthlog = (line for line in
myAuthlog if “Failed password for” in line) # Groups all the times and
dates together for key, group in groupby(myAuthlog, key = lambda x:
x[:9]): month, day, hour = key[0:3], key[4:6], key[7:9] # prints the
results out in a format to understand e.g date, time then amount of
attacks print( “On%s-%s at %s:00 There was %d attacks”%(day, month,
hour, len(list(group))) )</p>
<p>def attackers_count_by_IP(): #how many attacks occur per hour per day
per IP from itertools import groupby import re myAuthlog =
open(‘logs/ip.log5’, ‘r’) myAuthlog = (line for line in myAuthlog if
“Failed password for” in line) for key, group in groupby(myAuthlog,
key=lambda x: x[:9] + re.search(‘from(.+?) port’, x).group(1)): month,
day, hour, ip = key[0:3], key[4:6], key[7:9], key[10:] print( “On%s-%s
at %s:00 There was %d attacks FROM IP %s” % (day, month, hour,
len(list(group)), ip) ) —————————————————————————————— #Extract IP
address from file; reoccuring, common, repeating IP address</p>
<p>#log USER_ID,IP_ADDRESS XXXXXX24,10.12.6.54 XXXXXX24,10.12.6.54
XXXXXX24,10.12.6.54 XXXXXX24,10.12.6.54 XXXXXX24,10.12.6.54
XXXXXX25,10.12.6.55 XXXXXX25,10.12.6.55 XXXXXX25,10.12.6.55
XXXXXX25,10.12.6.55 XXXXXX25,10.12.6.55 XXXXXX21,10.12.6.51
XXXXXX21,10.12.6.51 XXXXXX21,10.12.6.51 XXXXXX21,10.12.6.51</p>
<p>import collections</p>
<p>import pandas as pd from tabulate import tabulate</p>
<p>with open(“data_file.csv”) as file: next(file, None) # skip the
header counter = collections.Counter([line.strip() for line in
file])</p>
<p>output = collections.defaultdict(dict) for user_and_ip,
ip_to_user_count in counter.items(): user, ip = user_and_ip.split(“,”)
output[ip].update({user: ip_to_user_count})</p>
<p>df = pd.DataFrame(output).fillna(““) print(tabulate(df,
headers=”keys”)) df.to_csv(“user_to_ip.csv”)</p>
<h1 id="or">or</h1>
<p>import csv import collections from collections import Counter</p>
<p>datafile=open(‘conn.csv’,‘r’) usefuldata=[] for line in datafile:
usefuldata.append(line) outfile1=Counter(usefuldata) for value,count in
outfile1.most_common(): print(value,count)
—————————————————————————————— #Extract IP address from file;
reoccuring, common, repeating IP address</p>
<p>#log 1;Jan 10, 2003 04:34:12.870401000
EST;65.240.185.205;2335;131.243.2.12;21;6;48;TCP;2335</p>
<p>2;Jan 10, 2003 04:34:12.870741000
EST;131.243.2.12;21;65.240.185.205;2335;6;48;TCP;21</p>
<p>3;Jan 10, 2003 04:34:13.050626000
EST;65.240.185.205;2335;131.243.2.12;21;6;40;TCP;2335</p>
<p>4;Jan 10, 2003 04:34:13.274193000
EST;131.243.2.12;21;65.240.185.205;2335;6;123;FTP;Response</p>
<p>5;Jan 10, 2003 04:34:13.455582000
EST;65.240.185.205;2335;131.243.2.12;21;6;56;FTP;Request</p>
<p>from collections import Counter</p>
<p>def getIP(line): parts = line.split(“;”) if len(parts) == 10: return
parts[2]</p>
<p>with open(“/path/to/log”, “r”) as f: ips = Counter(getIP(line) for
line in f)</p>
<table>
<colgroup>
<col style="width: 100%" />
</colgroup>
<thead>
<tr class="header">
<th style="text-align: left;">#Extract IP address from file</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">#Extract IP address from file</td>
</tr>
<tr class="even">
<td style="text-align: left;">import re</td>
</tr>
<tr class="odd">
<td style="text-align: left;"># opening and reading the file with
open(‘test2.txt’) as fh: string = fh.readlines()</td>
</tr>
<tr class="even">
<td style="text-align: left;"># declaring the regex pattern for IP
addresses pattern
=re.compile(’’‘((25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?).)
{3}(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)’’’)</td>
</tr>
<tr class="odd">
<td style="text-align: left;"># initializing the list objects valid =[]
invalid=[]</td>
</tr>
<tr class="even">
<td style="text-align: left;"># extracting the IP addresses for line in
string: line = line.rstrip() result = pattern.search(line)</td>
</tr>
<tr class="odd">
<td style="text-align: left;"># valid IP addresses if result:
valid.append(line)</td>
</tr>
<tr class="even">
<td style="text-align: left;"># invalid IP addresses else:
invalid.append(line)</td>
</tr>
<tr class="odd">
<td style="text-align: left;"># displaying the IP addresses print(“Valid
IPs”) print(valid) print(“Invalid IPs”) print(invalid)</td>
</tr>
</tbody>
</table>
<p>#Extract IP address from file</p>
<h1 id="importing-the-module">importing the module</h1>
<p>import re</p>
<h1 id="opening-and-reading-the-file">opening and reading the file</h1>
<p>with open(‘a.txt’) as fh: fstring = fh.readlines()</p>
<h1 id="declaring-the-regex-pattern-for-ip-addresses">declaring the
regex pattern for IP addresses</h1>
<p>pattern = re.compile(r’(...)’)</p>
<h1 id="initializing-the-list-object">initializing the list object</h1>
<p>lst=[]</p>
<h1 id="extracting-the-ip-addresses">extracting the IP addresses</h1>
<p>for line in fstring: lst.append(pattern.search(line)[0])</p>
<h1 id="displaying-the-extracted-ip-addresses">displaying the extracted
IP addresses</h1>
<p>print(lst)</p>
<table>
<colgroup>
<col style="width: 100%" />
</colgroup>
<thead>
<tr class="header">
<th style="text-align: center;">#check IP address</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: center;">#check IP address</td>
</tr>
<tr class="even">
<td style="text-align: center;">def validIP_parse(IP_ADDRESS): octets =
IP_ADDRESS.split(“.”) if len(octets) != 4: msg = IP_ADDRESS + ” does not
have 4 octets” print(msg) return</td>
</tr>
<tr class="odd">
<td style="text-align: center;">for i in octets: try: if not
isinstance(int(i), int): print(” IP_ADDRESS + ’ invalid ip address’ “)
except ValueError: print(IP_ADDRESS + ’ has non integer value ’)
return</td>
</tr>
<tr class="even">
<td style="text-align: center;">for i in octets: if not ( 0&lt;= int(i)
&lt;=255 ): print(IP_ADDRESS + ’ octet has value out of range’)
return</td>
</tr>
<tr class="odd">
<td style="text-align: center;">print(IP_ADDRESS + ’ valid ip address’)
return</td>
</tr>
</tbody>
</table>
<p><span
class="math inline"><em>c</em><em>a</em><em>t</em><em>f</em><em>i</em><em>l</em><em>e</em>1.<em>t</em><em>x</em><em>t</em><em>q</em><em>w</em><em>e</em><em>r</em><em>h</em><em>y</em><em>a</em><em>s</em><em>d</em><em>f</em><em>u</em><em>j</em><em>z</em><em>x</em><em>c</em><em>v</em><em>u</em><em>i</em>1234<em>o</em><em>p</em><em>a</em><em>a</em><em>b</em><em>b</em></span>cat
file2.txt 0987 aa 5678 bb uiop cc qwer tt zxcv vv aa bb $ cat
common_linux_files.py #!/usr/bin/env python</p>
<p>file1 = set( line.strip() for line in open(“file1.txt”) ) file2 =
set( line.strip() for line in open(“file2.txt”) )</p>
<p>for line in file1 &amp; file2: if line: print(line)
—————————————————————————————— # words of a file</p>
<p>l = [] f = open(“filename.txt”, “rU”) for line in f: for word in
line.split() l.append(word)</p>
<table>
<colgroup>
<col style="width: 100%" />
</colgroup>
<thead>
<tr class="header">
<th style="text-align: center;"># words of a file def word_gen(file):
for line in file: for word in line.split(): yield word</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: center;"># words of a file</td>
</tr>
<tr class="even">
<td style="text-align: center;">words =
open(‘myfile’).read().split()</td>
</tr>
</tbody>
</table>
<h1 id="words-of-a-file">words of a file</h1>
<p>f = file(“your-filename-here”).read() for word in f.split(): # do
something with word print(word) —————————————————————————————— # words
of a file</p>
<p>line = ’’ while True: word, space, line = line.partition(’ ‘) if
space: # A word was found yield word else: # A word was not found; read
a chunk of data from file next_chunk = input_file.read(1000) if
next_chunk: # Add the chunk to our line line = word + next_chunk else: #
No more data; yield the last word and return yield word.rstrip(’’)
return —————————————————————————————— #compare files</p>
<h1 id="open-file-in-read-mode">Open File in Read Mode</h1>
<p>file_1 = open(‘file1.txt’, ‘r’) file_2 = open(‘file2.txt’, ‘r’)</p>
<p>print(“Comparing files”, ” @ ” + ‘file1.txt’, ” # ” + ‘file2.txt’,
sep=‘’)</p>
<p>file_1_line = file_1.readline() file_2_line = file_2.readline()</p>
<h1 id="use-as-a-counter">Use as a COunter</h1>
<p>line_no = 1</p>
<p>print()</p>
<p>with open(‘file1.txt’) as file1: with open(‘file2.txt’) as file2:
same = set(file1).intersection(file2)</p>
<p>print(“Common Lines in Both Files”)</p>
<p>for line in same: print(line, end=’’)</p>
<p>print(‘’) print(“Difference Lines in Both Files”) while file_1_line
!= ’’ or file_2_line != ’’:</p>
<pre><code># Removing whitespaces
file_1_line = file_1_line.rstrip()
file_2_line = file_2_line.rstrip()

# Compare the lines from both file
if file_1_line != file_2_line:

    # otherwise output the line on file1 and use @ sign
    if file_1_line == &#39;&#39;:
        print(&quot;@&quot;, &quot;Line-%d&quot; % line_no, file_1_line)
    else:
        print(&quot;@-&quot;, &quot;Line-%d&quot; % line_no, file_1_line)
        
    # otherwise output the line on file2 and use # sign
    if file_2_line == &#39;&#39;:
        print(&quot;#&quot;, &quot;Line-%d&quot; % line_no, file_2_line)
    else:
        print(&quot;#+&quot;, &quot;Line-%d&quot; % line_no, file_2_line)

    # Print a empty line
    print()

# Read the next line from the file
file_1_line = file_1.readline()
file_2_line = file_2.readline()

line_no += 1</code></pre>
<p>file_1.close() file_2.close()</p>
<table>
<colgroup>
<col style="width: 100%" />
</colgroup>
<thead>
<tr class="header">
<th style="text-align: left;">#compare files</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">#compare files</td>
</tr>
<tr class="even">
<td style="text-align: left;">import difflib</td>
</tr>
<tr class="odd">
<td style="text-align: left;">with open(‘file1.txt’) as file_1:
file_1_text = file_1.readlines()</td>
</tr>
<tr class="even">
<td style="text-align: left;">with open(‘file2.txt’) as file_2:
file_2_text = file_2.readlines()</td>
</tr>
<tr class="odd">
<td style="text-align: left;"># Find and print the diff: for line in
difflib.unified_diff( file_1_text, file_2_text, fromfile=‘file1.txt’,
tofile=‘file2.txt’, lineterm=’’): print(line)</td>
</tr>
</tbody>
</table>
<p>$ cat compare_files.py #!/usr/bin/env python</p>
<p>import filecmp</p>
<p>file1 = “file1.txt” file2 = “file2.txt”</p>
<p>result = filecmp.cmp(file1,file2) print(result)</p>
<p>deep_result = filecmp.cmp(file1,file2,shallow=False)
print(deep_result)</p>
<p>if result == False: print(file1, ” is different from “, file2) else:
print(file1,” and “, file2,” are same”) ——————————————————————————————
#Compare Two Dictionaries</p>
<p>def compare_dicts(dictionary1,dictionary2): common_pairs = dict() for
key in dictionary1: if (key in dictionary2 and dictionary1[key] ==
dictionary2[key]): common_pairs[key] = dictionary1[key]
print(common_pairs) —————————————————————————————— #Compare Two
Dictionaries</p>
<p>def Dicts_Not_Equal(first,second): ““” return True if both do not
have same length or if any keys and values are not the same ““” if
len(first) == len(second): for k in first: if first.get(k) !=
second.get(k,k) or k not in second: return (True) for k in second:<br />
if first.get(k,k) != second.get(k) or k not in first: return (True)
return (False)<br />
return (True) —————————————————————————————— #Compare Two
Dictionaries</p>
<p>def compare_dicts(x,y): if json.dumps(x, sort_keys=True) ==
json.dumps(y, sort_keys=True): print(’ both equal’) else: print (’ not
equal’) —————————————————————————————— #Compare Two Dictionaries</p>
<p>def equal(a, b): type_a = type(a) type_b = type(b)</p>
<pre><code>if type_a != type_b:
    return False

if isinstance(a, dict):
    if len(a) != len(b):
        return False
    for key in a:
        if key not in b:
            return False
        if not equal(a[key], b[key]):
            return False
    return True

elif isinstance(a, list):
    if len(a) != len(b):
        return False
    while len(a):
        x = a.pop()
        index = indexof(x, b)
        if index == -1:
            return False
        del b[index]
    return True
    
else:
    return a == b</code></pre>
<p>def indexof(x, a): for i in range(len(a)): if equal(x, a[i]): return
i return -1</p>
<table>
<colgroup>
<col style="width: 100%" />
</colgroup>
<thead>
<tr class="header">
<th style="text-align: left;">#Compare Two Dictionaries</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">#Compare Two Dictionaries</td>
</tr>
<tr class="even">
<td style="text-align: left;">shared_items = {k: x[k] for k in x if k in
y and x[k] == y[k]} print(len(shared_items))</td>
</tr>
</tbody>
</table>
<p>#Compare Two Dictionaries dict1 = {‘Name’: ‘asif’, ‘Age’: 5} dict2 =
{‘Name’: ‘lalita’, ‘Age’: 78}</p>
<p>if dict1 == dict2: print “dict1 is equal to dict2” else: print “dict1
is not equal to dict2” —————————————————————————————— #difference
between two time stamps in minutes from datetime import datetime</p>
<p>fmt = ‘%Y-%m-%d %H:%M:%S’ tstamp1 = datetime.strptime(‘2016-04-06
21:26:27’, fmt) tstamp2 = datetime.strptime(‘2016-04-07 09:06:02’,
fmt)</p>
<p>if tstamp1 &gt; tstamp2: td = tstamp1 - tstamp2 else: td = tstamp2 -
tstamp1 td_mins = int(round(td.total_seconds() / 60))</p>
<h2 id="printthe-difference-is-approx.-s-minutes-td_mins">print(‘The
difference is approx. %s minutes’ % td_mins)</h2>
<p>#convert a file into a dictionary</p>
<p>#read this log file and store the information inside a dictionary
#variable order stores all the dictionary keys in the same order as that
of a single log 2021-10-26 10:26:44 | https://website.com/home | SUCCESS
| Message 2021-10-26 10:26:54 | https://website.com/about | SUCCESS |
Message 2021-10-26 10:27:01 | https://website.com/page | ERROR | Message
2021-10-26 10:27:03 | https://website.com/user/me | SUCCESS | Message
2021-10-26 10:27:04 | https://website.com/settings/ | ERROR |
Message</p>
<p>import json</p>
<p>file_name = “log.txt” file = open(file_name, “r”) data = [] order =
[“date”, “url”, “type”, “message”]</p>
<p>for line in file.readlines(): details = line.split(“|”) details =
[x.strip() for x in details] structure = {key:value for key, value in
zip(order, details)} data.append(structure)</p>
<p>for entry in data: print(json.dumps(entry, indent = 4))</p>
<table>
<colgroup>
<col style="width: 100%" />
</colgroup>
<thead>
<tr class="header">
<th style="text-align: left;">#convert a file into a dictionary</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">#convert a file into a dictionary</td>
</tr>
<tr class="even">
<td style="text-align: left;">cat data.txt a 1 b 2 c 3</td>
</tr>
<tr class="odd">
<td style="text-align: left;">def file_read(logFile): f = open(logFile)
dict = {} for line in f: key,value = line.split() dict[key] = value
print(dict)</td>
</tr>
<tr class="even">
<td style="text-align: left;">file_read(‘data.txt’)</td>
</tr>
</tbody>
</table>
<p>#convert a file into a dictionary</p>
<p>cat data.txt a 1 b 2 c 3</p>
<p>dictionary = {} f = open(“data.txt”) for line in file:</p>
<pre><code>(key, value) = line.split()
dict[key] = int(value)  # value is numeric</code></pre>
<h2 id="print-file-to-dictionarydictionary">print (‘file to
dictionary=’,dictionary)</h2>
<p>#convert a file into a dictionary</p>
<p>cat data.txt myline = data myline2 = This is data myline3 =
Dict_Keydata myline4 = Dict_datavalue</p>
<p>myfile = open(“data.txt”, ‘r’) data_dict = {} for line in myfile: k,
v = line.strip().split(‘=’) data_dict[k.strip()] = v.strip()</p>
<p>myfile.close()</p>
<h2 id="print-text-file-to-dictionary-data_dict">print(’ text file to
dictionary =’,data_dict</h2>
<p>#JSON Module to Convert text file to dictionary</p>
<p>import json #Import the JSON Module dict_students = {‘Name’ : ‘Jack’,
‘Sub’ : ‘Math’, ‘marks’ : 100,‘Grade’:‘A’}#open the file in write mode
using with statement with open(“DictFile.txt”,“w”) as file:
file.write(json.dumps(dict_students)) #Write the dictionary to file</p>
<p>#reading the json file with open(“DictFile.txt”, “r”) as file: #open
the file in read mode using with statement file_content = file.read()
#Convert text file to Dictionary print(‘file contents:’,file_content)
—————————————————————————————— #Pickle.dump() to Convert dictionary to a
text file</p>
<p>import pickle dict_students = {‘Name’ : ‘Jack’, ‘Sub’ : ‘Math’,
‘marks’ : 100,‘Grade’:‘A’} file = open(“DictFile.pkl”,“wb”) #open the
file in write mode by using “wb”, this mode is used to open files for
writing in binary format. pickle.dump(dict_students, file)
#pickle.dump() to serialize dictionary data and then write to file.
file.close()</p>
<p>#reading the DictFile.pkl” contents file = open(“DictFile.pkl”, “rb”)
#open the binary file in reading mode(“rb”) file_contents =
pickle.load(file) #pickle.load() method to deserialize the file contents
print(file_contents)</p>
<table>
<colgroup>
<col style="width: 100%" />
</colgroup>
<thead>
<tr class="header">
<th style="text-align: left;">#store a list as a dictionary</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">#(AM/PM) using strftime</td>
</tr>
<tr class="even">
<td style="text-align: left;">&gt;&gt;&gt; from datetime import datetime
&gt;&gt;&gt; print(datetime.today().strftime(“%H:%M %p”)) 15:31 AM</td>
</tr>
</tbody>
</table>
<p>#(AM/PM) using strftime, %H (24 hour format) %I (12 hour format)</p>
<p>from datetime import datetime date_string = ‘2009-11-29 03:17 PM’
format = ‘%Y-%m-%d %I:%M %p’ my_date = datetime.strptime(date_string,
format)</p>
<h1 id="this-prints-2009-11-29-0317-am">This prints ‘2009-11-29 03:17
AM’</h1>
<p>print my_date.strftime(format)</p>
<table>
<colgroup>
<col style="width: 100%" />
</colgroup>
<thead>
<tr class="header">
<th style="text-align: left;">#Calculate Time Difference from datetime
import datetime</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">#log</td>
</tr>
<tr class="even">
<td style="text-align: left;">Jul 11 16:11:58:710 [139681125603136] dut:
Device State: ON Jul 11 16:11:58:710 [139681125603136] dut: Subscribe
request received from 172.17.60.11/49248 Jul 11 16:11:58:962
[139681125603136] dut: sockAccept: new socket fd=31 Jul 11 16:11:58:962
[139681125603136] dut: sockAccept: new session nims=0x17279e0
new=0x1759750 fd=31 10.238.40.228/48002&lt;-10.238.40.228/37400 Jul 11
16:11:58:962 [139681125603136] dut: RREQUEST: verify_login
&lt;-10.238.40.228/37400 h=367 d=147 Jul 11 16:11:58:962
[139681125603136] dut: head mtype=100 cmd=verify_login seq=0
ts=1499811118 frm=10.238.40.228/37400 tout=180 addr=
sid=zYyeCp56Cg4og2P41oP7yQADMTQ5OTgzMjcxMwFheGEtdWltc2VydmVyMS1kZXZf Jul
11 16:11:58:962 [139681125603136] dut: data time=1499811118
cmd=probe_list</td>
</tr>
<tr class="odd">
<td style="text-align: left;">import re from datetime import
datetime</td>
</tr>
<tr class="even">
<td
style="text-align: left;">pattern=re.compile(r”(?P<year>-(?P<month>-(?P<day>
(?P<hour>:(?P<minute>:(?P<second>,(?P<microsecond>“) logline=”2021-10-20
13:12:21,697 - root - DEBUG - begin:test(4), pattern:%d%d(4),
next:(0)”</td>
</tr>
<tr class="odd">
<td style="text-align: left;">m=re.search(pattern,logline) if m:
print(f”Dict with string valiue : {m.groupdict()}“)</td>
</tr>
<tr class="even">
<td style="text-align: left;">extracted_date=dict([(k,int(v)) for k,v in
m.groupdict().items()]) ### ATTENTION ### ###
extracted_date[“microsecond”] are in fact milisecond in the pattern
extracted_date[“microsecond”]*=1000</td>
</tr>
<tr class="odd">
<td style="text-align: left;">print(f”Dict with integer value :
{extracted_date}“)</td>
</tr>
<tr class="even">
<td style="text-align: left;">begin_date=datetime(**extracted_date)
print(str(begin_date))</td>
</tr>
<tr class="odd">
<td style="text-align: left;">else: print(“notfound”)</td>
</tr>
<tr class="even">
<td style="text-align: left;">end_date=datetime.strptime(“2021-10-20
13:38:12,456000”, “%Y-%m-%d %H:%M:%S,%f”) print(end_date)</td>
</tr>
<tr class="odd">
<td style="text-align: left;">delta=end_date-begin_date</td>
</tr>
<tr class="even">
<td style="text-align: left;">print(f”Delta in seconds :
{delta.seconds}“) print(f”Delta microseconds : {delta.microseconds}“)
print(f”Delta days : {delta.days}“)</td>
</tr>
</tbody>
</table>
<p>#Difference between two timestamps</p>
<p>from datetime import datetime</p>
<h1 id="start-and-end-timestamps">start and end timestamps</h1>
<p>start_ts = 1652426243.907874 end_ts = 1652436243.907874</p>
<h1 id="convert-timestamps-to-datetime-object">convert timestamps to
datetime object</h1>
<p>dt1 = datetime.fromtimestamp(start_ts) print(‘Datetime Start:’, dt1)
dt2 = datetime.fromtimestamp(end_ts) print(‘Datetime End:’, dt2)</p>
<h1 id="difference-between-two-timestamps">Difference between two
timestamps</h1>
<h1 id="in-hoursminutesseconds-format">in hours:minutes:seconds
format</h1>
<p>delta = dt2 - dt1 print(‘Difference is:’, delta)
—————————————————————————————— #execute_external_commands</p>
<p>import subprocess</p>
<p>subprocess.call([“touch”, “sample.txt”]) subprocess.call([“ls”])
print(“Sample file created”) subprocess.call([“rm”, “sample.txt”])
subprocess.call([“ls”]) print(“Sample file deleted”)
——————————————————————————————</p>
